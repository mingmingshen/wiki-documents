"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[2782],{63934:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"NeoEdge NG4500 Series/NG4500-CB01 Development Board/Software Guide/Driver Installation and Updates/wifi","title":"WIFI","description":"This document describes the installation and usage instructions for WiFi drivers, using rtl8821 as an example.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/1-NeoEdge NG4500 Series/2-NG4500-CB01 Development Board/2-Software Guide/1-Driver Installation and Updates/1-wifi.md","sourceDirName":"1-NeoEdge NG4500 Series/2-NG4500-CB01 Development Board/2-Software Guide/1-Driver Installation and Updates","slug":"/NeoEdge NG4500 Series/NG4500-CB01 Development Board/Software Guide/Driver Installation and Updates/wifi","permalink":"/wiki-documents/en/docs/NeoEdge NG4500 Series/NG4500-CB01 Development Board/Software Guide/Driver Installation and Updates/wifi","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Interface","permalink":"/wiki-documents/en/docs/NeoEdge NG4500 Series/NG4500-CB01 Development Board/Software Guide/Driver Installation and Updates/Interface&modules configure"},"next":{"title":"OV5647","permalink":"/wiki-documents/en/docs/NeoEdge NG4500 Series/NG4500-CB01 Development Board/Software Guide/Driver Installation and Updates/ov5647"}}');var t=r(74848),o=r(28453);const s={},d="WIFI",c={},l=[{value:"Methods",id:"methods",level:2},{value:"In-System Installation",id:"in-system-installation",level:2},{value:"Source Code Compilation",id:"source-code-compilation",level:2},{value:"Code Acquisition",id:"code-acquisition",level:3},{value:"Compilation",id:"compilation",level:3},{value:"Usage and Verification",id:"usage-and-verification",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"wifi",children:"WIFI"})}),"\n",(0,t.jsx)(n.p,{children:"This document describes the installation and usage instructions for WiFi drivers, using rtl8821 as an example."}),"\n",(0,t.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(n.p,{children:"There are two approaches for installation and usage:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Direct installation within the system"}),"\n",(0,t.jsx)(n.li,{children:"Compiling from source code and then flashing"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"in-system-installation",children:"In-System Installation"}),"\n",(0,t.jsx)(n.p,{children:"Execute the following commands to automatically install the driver after entering the system:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ sudo apt update\r\n$ sudo apt install rtl8821ce-dkms\n"})}),"\n",(0,t.jsx)(n.p,{children:"After completion, execute modprobe:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ sudo modprobe rtl8821ce\n"})}),"\n",(0,t.jsx)(n.p,{children:"Check relevant logs using dmesg to confirm successful driver loading:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"[   10.805932] rtl8821ce 0001:01:00.0: Adding to iommu group 3\r\n[   10.806901] rtl8821ce 0001:01:00.0: enabling device (0000 -> 0003)\r\n[   11.077841] Bluetooth: hci0: RTL: loading rtl_bt/rtl8821c_fw.bin\r\n[   11.079036] Bluetooth: hci0: RTL: loading rtl_bt/rtl8821c_config.bin\r\n[   11.320620] rtl8821ce 0001:01:00.0 wlP1p1s0: renamed from wlan0\n"})}),"\n",(0,t.jsx)(n.h2,{id:"source-code-compilation",children:"Source Code Compilation"}),"\n",(0,t.jsx)(n.h3,{id:"code-acquisition",children:"Code Acquisition"}),"\n",(0,t.jsx)(n.p,{children:"Source code can be obtained from GitHub or provided by the WiFi manufacturer."}),"\n",(0,t.jsxs)(n.p,{children:["The rtl8821 GitHub repository is available at: ",(0,t.jsx)(n.a,{href:"https://github.com/tomaspinho/rtl8821ce",children:"GitHub - tomaspinho/rtl8821ce"})]}),"\n",(0,t.jsx)(n.h3,{id:"compilation",children:"Compilation"}),"\n",(0,t.jsx)(n.p,{children:"Place the source code in the project directory under Linux_for_Tegra/source/nvidia-oot/drivers corresponding to the driver path, for example:"}),"\n",(0,t.jsx)(n.p,{children:"Linux_for_Tegra/source/nvidia-oot/drivers/net/wireless/realtek"}),"\n",(0,t.jsx)(n.p,{children:"Modify the Makefile to include rtl8821ce in the compilation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"obj-m += rtl8821ce/\n"})}),"\n",(0,t.jsx)(n.p,{children:"Modify the driver's Makefile according to actual requirements. The diff for modifying the Makefile in the rtl8821ce directory is as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"diff --git a/Makefile b/Makefile\r\nindex 5b5dc9a..01b1e24 100755\r\n--- a/Makefile\r\n+++ b/Makefile\r\n@@ -15,6 +15,8 @@ EXTRA_CFLAGS += -Wno-unused-parameter\r\n EXTRA_CFLAGS += -Wno-unused-function\r\n EXTRA_CFLAGS += -Wno-unused\r\n #EXTRA_CFLAGS += -Wno-uninitialized\r\n+EXTRA_CFLAGS += -Wno-missing-prototypes\r\n+EXTRA_CFLAGS += -Wno-error=misleading-indentation\r\n\r\n GCC_VER_49 := $(shell echo `$(CC) -dumpversion | cut -f1-2 -d.` \\>= 4.9 | bc )\r\n ifeq ($(GCC_VER_49),1)\r\n@@ -29,6 +31,7 @@ else\r\n     export TopDIR ?= $(srctree)/$(src)\r\n endif\r\n\r\n+TopDIR = $(srctree.nvidia-oot)/drivers/net/wireless/realtek/rtl8821ce\r\n EXTRA_CFLAGS += -I$(TopDIR)/include\r\n\r\n EXTRA_LDFLAGS += --strip-debug\r\n@@ -113,7 +116,8 @@ CONFIG_RTW_SDIO_PM_KEEP_POWER = y\r\n ###################### MP HW TX MODE FOR VHT #######################\r\n CONFIG_MP_VHT_HW_TX_MODE = n\r\n ###################### Platform Related #######################\r\n-CONFIG_PLATFORM_I386_PC = y\r\n+CONFIG_PLATFORM_TEGRA = y\r\n+CONFIG_PLATFORM_I386_PC = n\r\n CONFIG_PLATFORM_ANDROID_X86 = n\r\n CONFIG_PLATFORM_ANDROID_INTEL_X86 = n\r\n CONFIG_PLATFORM_JB_X86 = n\r\n@@ -1212,6 +1216,15 @@ endif\r\n\r\n EXTRA_CFLAGS += -DDM_ODM_SUPPORT_TYPE=0x04\r\n\r\n+ifeq ($(CONFIG_PLATFORM_TEGRA), y)\r\n+ARCH = arm\r\n+KVER := $(shell uname -r)\r\n+KSRC := /lib/modules/$(KVER)/build\r\n+EXTRA_CFLAGS += -DCONFIG_LITTLE_ENDIAN\r\n+EXTRA_CFLAGS += -DCONFIG_IOCTL_CFG80211 -DRTW_USE_CFG80211_STA_EVENT\r\n+EXTRA_CFLAGS += -Wno-error=date-time\r\n+MODULE_NAME = rtl8821ce\r\n+endif\r\n ifeq ($(CONFIG_PLATFORM_I386_PC), y)\r\n EXTRA_CFLAGS += -DCONFIG_LITTLE_ENDIAN\r\n EXTRA_CFLAGS += -DCONFIG_IOCTL_CFG80211 -DRTW_USE_CFG80211_STA_EVENT\r\n@@ -2232,7 +2245,7 @@ ifeq ($(CONFIG_RTL8723B), y)\r\n $(MODULE_NAME)-$(CONFIG_MP_INCLUDED)+= core/rtw_bt_mp.o\r\n endif\r\n\r\n-obj-$(CONFIG_RTL8821CE) := $(MODULE_NAME).o\r\n+obj-m := $(MODULE_NAME).o\r\n\r\n else\n"})}),"\n",(0,t.jsx)(n.p,{children:"After modification, execute the kernel compilation command or compile the module separately and install it to the rootfs, then proceed with flashing. Refer to previous relevant documents for compilation and flashing instructions."}),"\n",(0,t.jsx)(n.h2,{id:"usage-and-verification",children:"Usage and Verification"}),"\n",(0,t.jsx)(n.p,{children:"After system startup, execute modprobe:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ sudo modprobe rtl8821ce\n"})}),"\n",(0,t.jsx)(n.p,{children:"Use the lspci command to view devices on the PCI bus:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"0001:01:00.0 Network controller: Realtek Semiconductor Co., Ltd. RTL8821CE 802.11ac PCIe Wireless Network Adapter\n"})}),"\n",(0,t.jsx)(n.p,{children:"The dmesg command shows successful device addition:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ sudo dmesg | grep rtl\r\n[    9.785137] rtl8821ce 0001:01:00.0: Adding to iommu group 3\r\n[    9.785307] rtl8821ce 0001:01:00.0: enabling device (0000 -> 0003)\r\n[   10.010615] Bluetooth: hci0: RTL: loading rtl_bt/rtl8821c_fw.bin\r\n[   10.011780] Bluetooth: hci0: RTL: loading rtl_bt/rtl8821c_config.bin\r\n[   10.441574] rtl8821ce 0001:01:00.0 wlP1p1s0: renamed from wlan0\n"})}),"\n",(0,t.jsx)(n.p,{children:"Connect to WiFi:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"RTL8821_wifi_connection1.png",src:r(7562).A+"",width:"423",height:"493"})}),"\n",(0,t.jsx)(n.p,{children:"Check network devices using ifconfig:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"wlP1p1s0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\r\n        inet 192.168.204.218  netmask 255.255.255.0  broadcast 192.168.204.255\r\n        inet6 fe80::aba:6776:77ec:4831  prefixlen 64  scopeid 0x20<link>\r\n        inet6 2409:8934:20d4:908:f2b8:fd54:f19a:a11a  prefixlen 64  scopeid 0x0<global>\r\n        inet6 2409:8934:20d4:908:5de2:d217:83e0:d943  prefixlen 64  scopeid 0x0<global>\r\n        ether a4:e8:8d:0f:e4:ce  txqueuelen 1000  (Ethernet)\r\n        RX packets 2060  bytes 2644294 (2.6 MB)\r\n        RX errors 0  dropped 48  overruns 0  frame 0\r\n        TX packets 1656  bytes 195010 (195.0 KB)\r\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0ons 0\n"})}),"\n",(0,t.jsx)(n.p,{children:"Test network connection using ping:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ ping -I wlP1p1s0 www.baidu.com\r\nPING www.baidu.com(2409:8c20:6:1d55:0:ff:b09c:7d77 (2409:8c20:6:1d55:0:ff:b09c:7d77)) from 2409:8934:20d4:908:5de2:d217:83e0:d943 wlP1p1s0: 56 data bytes\r\n64 bytes from 2409:8c20:6:1d55:0:ff:b09c:7d77 (2409:8c20:6:1d55:0:ff:b09c:7d77): icmp_seq=1 ttl=48 time=88.7 ms\r\n64 bytes from 2409:8c20:6:1d55:0:ff:b09c:7d77 (2409:8c20:6:1d55:0:ff:b09c:7d77): icmp_seq=2 ttl=48 time=50.8 ms\r\n64 bytes from 2409:8c20:6:1d55:0:ff:b09c:7d77 (2409:8c20:6:1d55:0:ff:b09c:7d77): icmp_seq=3 ttl=48 time=80.5 ms\r\n64 bytes from 2409:8c20:6:1d55:0:ff:b09c:7d77 (2409:8c20:6:1d55:0:ff:b09c:7d77): icmp_seq=4 ttl=48 time=86.1 ms\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},7562:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/RTL8821_wifi_connection1-8f053624f6300ee150825aafdc321554.png"},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>d});var i=r(96540);const t={},o=i.createContext(t);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);